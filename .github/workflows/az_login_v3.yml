# File: .github/workflows/az_login_v2.yml

on: [push]

name: AzureCLIAction

jobs:

  build-and-deploy:
    runs-on: ubuntu-latest
    steps:

    - uses: azure/login@v1
      with:
        creds: ${{ secrets.Azure_cred_login_obj }}
    - name: Checkout
      uses: actions/checkout@v1
    # - run : 
    #     chmod +x ./sampleScript.sh
    #     ./sampleScript.sh
    # - name: Az cli spike
    #   uses: ./spike-az-cli_2
    #   with:
    #     azcliversion: 2.0.56
    #     inlineScript: 'az account show ; az --version;pwd;ls'
        # scriptPath: 'sampleScript.sh'
    # - run: |
    #     docker run -i --workdir /github/workspace -v /home/runner/work/github-action-spike/github-action-spike/:/github/workspace -v /home/runner/.azure:/root/.azure mcr.microsoft.com/azure-cli bash /home/runner/work/github-action-spike/github-action-spike/sampleScript.sh
    # - name: Az cli spike
    #   uses: ./spike-az-cli_2
    #   with:
    #     inlineScript: |
    #       echo "what is your name?"
    #       remark="az --version"
    #       echo "I am $remark too!"
    #       remark
    #       mdckms
    #       null
    #       echo remark  
    #       az account show
        # inlineScript: 'echo "what is your name?" remark="az --version" echo "I am $remark too!" $remark az webapp list --query "[?state==\'Running\']" az account show';
    - name: Az cli spike
      uses: ./spike-az-cli_2